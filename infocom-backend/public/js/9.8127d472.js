(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[9],{8456:function(e,t,s){"use strict";s.r(t);var o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-page",[e.$store.getters.hasCallcenterAccess?s("q-table",{attrs:{title:"Customers",data:e.customers,columns:e.columns,"row-key":"id","rows-per-page-options":[20],pagination:e.pagination},on:{"update:pagination":[function(t){e.pagination=t},function(t){var s=t.page;e.fetchCustomers(s)}],"row-click":function(t,s,o){e.openCustomerModal(s)}},scopedSlots:e._u([{key:"top-right",fn:function(){return[s("q-btn",{attrs:{label:"Create"},on:{click:function(){e.openCustomerModal(null)}}},[s("q-dialog",{attrs:{persistent:""},model:{value:e.showCustomerForm,callback:function(t){e.showCustomerForm=t},expression:"showCustomerForm"}},[s("q-card",{staticStyle:{"min-width":"70%"}},[s("q-bar",[s("div",[e._v("Create Customer")]),s("q-space"),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"}},[s("q-tooltip",[e._v("Close")])],1)],1),s("q-form",{staticClass:"q-gutter-md",on:{submit:function(t){void 0===e.customerForm.id?e.createCustomer():e.updateCustomer()},reset:function(t){e.customerForm={}}}},[s("div",{staticClass:"row"},[s("q-input",{staticClass:"col-md-6 col-xs-12  q-my-xs q-px-xs",attrs:{filled:"",label:"Full Name"},model:{value:e.customerForm.name,callback:function(t){e.$set(e.customerForm,"name",t)},expression:"customerForm.name"}}),s("q-input",{staticClass:"col-md-6 col-xs-12  q-my-xs q-px-xs",attrs:{filled:"",label:"Phone"},model:{value:e.customerForm.phone,callback:function(t){e.$set(e.customerForm,"phone",t)},expression:"customerForm.phone"}})],1),s("div",{staticClass:"row q-my-none"},[s("q-input",{staticClass:"col-md-6 col-xs-12 q-my-xs q-px-xs",attrs:{filled:"",type:"email",label:"Email"},model:{value:e.customerForm.email,callback:function(t){e.$set(e.customerForm,"email",t)},expression:"customerForm.email"}}),s("q-input",{staticClass:"col-md-6 col-xs-12 q-my-xs q-px-xs",attrs:{filled:"",label:"Code"},model:{value:e.customerForm.code,callback:function(t){e.$set(e.customerForm,"code",t)},expression:"customerForm.code"}})],1),s("div",{staticClass:"row q-my-none"},[s("q-select",{staticClass:"col-md-6 col-xs-12 q-my-xs q-px-xs",attrs:{filled:"",options:e.$store.getters.getPopAddresses,"option-label":"name","option-value":"id","emit-value":"","map-options":"",label:"Pop Address"},model:{value:e.customerForm.popaddress_id,callback:function(t){e.$set(e.customerForm,"popaddress_id",e._n(t))},expression:"customerForm.popaddress_id"}}),s("q-input",{staticClass:"col-md-6 col-xs-12 q-my-xs q-px-xs",attrs:{filled:"",mask:"date",label:"Installation Date"},scopedSlots:e._u([{key:"append",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[s("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[s("q-date",{model:{value:e.customerForm.installation_date,callback:function(t){e.$set(e.customerForm,"installation_date",t)},expression:"customerForm.installation_date"}},[s("div",{staticClass:"row items-center justify-end"},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}],null,!1,1959010886),model:{value:e.customerForm.installation_date,callback:function(t){e.$set(e.customerForm,"installation_date",t)},expression:"customerForm.installation_date"}})],1),s("div",{staticClass:"row q-my-none"},[s("q-input",{staticClass:"col-md-6 col-xs-12 q-my-xs q-px-xs",attrs:{filled:"",label:"Technical Contact"},model:{value:e.customerForm.technical_contact,callback:function(t){e.$set(e.customerForm,"technical_contact",t)},expression:"customerForm.technical_contact"}}),s("q-input",{staticClass:"col-md-6 col-xs-12 q-my-xs q-px-xs",attrs:{filled:"",label:"Management Contact"},model:{value:e.customerForm.management_contact,callback:function(t){e.$set(e.customerForm,"management_contact",t)},expression:"customerForm.management_contact"}})],1),s("div",{staticClass:"row q-my-none"},[s("q-input",{staticClass:"col-md-6 col-xs-12 q-my-xs q-px-xs",attrs:{filled:"",label:"Connection Package"},model:{value:e.customerForm.connection_package,callback:function(t){e.$set(e.customerForm,"connection_package",t)},expression:"customerForm.connection_package"}}),s("q-input",{staticClass:"col-md-6 col-xs-12 q-my-xs q-px-xs",attrs:{filled:"",label:"Connection Details"},model:{value:e.customerForm.connection_details,callback:function(t){e.$set(e.customerForm,"connection_details",t)},expression:"customerForm.connection_details"}})],1),s("div",{staticClass:"row q-my-none"},[s("q-input",{staticClass:"col-md-6 col-xs-12 q-my-xs q-px-xs",attrs:{filled:"",label:"Other Services"},model:{value:e.customerForm.other_services,callback:function(t){e.$set(e.customerForm,"other_services",t)},expression:"customerForm.other_services"}}),s("q-input",{staticClass:"col-md-6 col-xs-12 q-my-xs q-px-xs",attrs:{filled:"",label:"Additional Technical Box"},model:{value:e.customerForm.additional_technical_box,callback:function(t){e.$set(e.customerForm,"additional_technical_box",t)},expression:"customerForm.additional_technical_box"}})],1),s("div",{staticClass:"row q-my-none"},[s("q-input",{staticClass:"col-md-6 col-xs-12 q-my-xs q-px-xs",attrs:{filled:"",label:"Billing Information"},model:{value:e.customerForm.billing_information,callback:function(t){e.$set(e.customerForm,"billing_information",t)},expression:"customerForm.billing_information"}}),s("q-input",{staticClass:"col-md-6 col-xs-12 q-my-xs q-px-xs",attrs:{filled:"",label:"KAM Name"},model:{value:e.customerForm.kam_name,callback:function(t){e.$set(e.customerForm,"kam_name",t)},expression:"customerForm.kam_name"}})],1),s("div",{staticClass:"q-pa-sm"},[s("q-btn",{staticClass:" q-mr-sm",attrs:{label:"Reset",type:"reset"}}),s("q-btn",{staticClass:"bg-purple text-white",attrs:{label:"Submit",type:"submit",disable:e.$store.getters.getActionRunningState}})],1)])],1)],1)],1)]},proxy:!0}],null,!1,1988213350)}):e._e()],1)},a=[],l=s("ded3"),n=s.n(l);const c=()=>({name:"",email:"",phone:"",code:"",popaddress_id:"",technical_contact:"",management_contact:"",connection_package:"",other_services:"",connection_details:"",additional_technical_box:"",billing_information:"",kam_name:"",installation_date:"",password:"",password_confirmation:""});var r={name:"DashboardCustomers",data(){return{showCustomerForm:!1,pagination:{page:1,rowsPerPage:20},departments:[],customers:[],customerForm:c(),columns:[{name:"name",align:"center",label:"Name",field:e=>e.user.name,sortable:!0},{name:"phone",align:"center",label:"Phone",field:e=>e.user.phone},{name:"email",align:"center",label:"Email",field:e=>e.user.email},{name:"code",align:"center",label:"Code",field:e=>e.code},{name:"popaddress",align:"center",label:"POP",field:e=>null===e.popaddress?"":e.popaddress.name}]}},mounted(){},methods:{openCustomerModal(e){this.customerForm=null===e?c():n()(n()(n()({},c()),e),{},{name:e.user.name,phone:e.user.phone,email:e.user.email}),this.showCustomerForm=!0},fetchCustomers(e=1){this.$axios.get(`customers?page=${e}`).then((e=>{this.customers=e.data.data}))},createCustomer(){this.$axios.post("customers",this.customerForm).then((e=>{201===e.status&&(this.showCustomerForm=!1,this.fetchCustomers(),this.customerForm=c(),this.$q.notify({type:"positive",message:"Customer Created Successfully",position:"top-right"}))}))},updateCustomer(){this.$axios.put(`customers/${this.customerForm.id}`,this.customerForm).then((e=>{204===e.status&&(this.showCustomerForm=!1,this.fetchCustomers(),this.customerForm=c(),this.$q.notify({type:"positive",message:"Customer Updated Successfully",position:"top-right"}))}))}}},i=r,m=s("2877"),u=s("9989"),d=s("eaac"),p=s("9c40"),x=s("24e8"),f=s("f09f"),q=s("d847"),b=s("2c91"),h=s("05c0"),C=s("0378"),F=s("27f9"),_=s("ddd8"),g=s("0016"),v=s("7cbe"),y=s("52ee"),k=s("7f67"),w=s("eebe"),$=s.n(w),P=Object(m["a"])(i,o,a,!1,null,null,null);t["default"]=P.exports;$()(P,"components",{QPage:u["a"],QTable:d["a"],QBtn:p["a"],QDialog:x["a"],QCard:f["a"],QBar:q["a"],QSpace:b["a"],QTooltip:h["a"],QForm:C["a"],QInput:F["a"],QSelect:_["a"],QIcon:g["a"],QPopupProxy:v["a"],QDate:y["a"]}),$()(P,"directives",{ClosePopup:k["a"]})}}]);