(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12],{9800:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",[t.$store.getters.hasAdminAccess?a("q-table",{attrs:{title:"supportagents"===t.$route.params.type?"Support Agents":"Call Center Agents",data:t.staffs,columns:t.columns,"row-key":"id","rows-per-page-options":[0],pagination:t.pagination,"hide-bottom":""},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"top-right",fn:function(){return[a("q-btn",{attrs:{label:"Create"},on:{click:function(e){t.showStaffForm=!0}}},[a("q-dialog",{attrs:{persistent:""},model:{value:t.showStaffForm,callback:function(e){t.showStaffForm=e},expression:"showStaffForm"}},[a("q-card",{staticStyle:{"min-width":"350px"}},[a("q-form",{on:{submit:function(e){return e.preventDefault(),e.stopPropagation(),t.createStaff.apply(null,arguments)}}},[a("q-card-section",{staticClass:"q-pa-xs"},[a("q-list",{attrs:{bordered:"",padding:""}},[a("q-item-label",{attrs:{header:""}},[t._v("Create New\n                    "+t._s("supportagents"===t.$route.params.type?"Support Agent":"Callcenter Agent")+"\n                  ")]),a("q-item",[a("q-item-section",[a("q-input",{attrs:{filled:"",label:"Name",rules:[function(t){return!!t||"Enter staff name"}]},model:{value:t.staffForm.name,callback:function(e){t.$set(t.staffForm,"name",e)},expression:"staffForm.name"}}),a("q-input",{attrs:{filled:"",label:"Phone",type:"tel",rules:[function(t){return!!t||"Enter staff phone number"}]},model:{value:t.staffForm.phone,callback:function(e){t.$set(t.staffForm,"phone",e)},expression:"staffForm.phone"}}),a("q-input",{attrs:{filled:"",label:"Email",type:"email",rules:[function(t){return!!t||"Enter staff email"}]},model:{value:t.staffForm.email,callback:function(e){t.$set(t.staffForm,"email",e)},expression:"staffForm.email"}}),"supportagents"===t.$route.params.type?a("q-select",{staticClass:"q-mb-md",attrs:{filled:"",clearable:"",options:t.departments,"option-label":"name","option-value":"id","emit-value":"","map-options":"",label:"Department"},model:{value:t.staffForm.department_id,callback:function(e){t.$set(t.staffForm,"department_id",t._n(e))},expression:"staffForm.department_id"}}):t._e(),a("q-input",{attrs:{filled:"",label:"Password",type:"password",rules:[function(t){return!!t||"Enter staff password"}]},model:{value:t.staffForm.password,callback:function(e){t.$set(t.staffForm,"password",e)},expression:"staffForm.password"}}),a("q-input",{attrs:{filled:"",label:"Password Confirmation",type:"password",rules:[function(t){return!!t||"Confirm staff password"},function(e){return e===t.staffForm.password||"Password not matching"}]},model:{value:t.staffForm.password_confirmation,callback:function(e){t.$set(t.staffForm,"password_confirmation",e)},expression:"staffForm.password_confirmation"}})],1)],1)],1)],1),a("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Close"}}),a("q-btn",{attrs:{flat:"",disable:t.staffForm.password!==t.staffForm.password_confirmation||""===t.staffForm.name||""===t.staffForm.phone||""===t.staffForm.email,label:"Confirm",type:"submit"}})],1)],1)],1)],1)],1)]},proxy:!0}],null,!1,100337449)}):t._e()],1)},n=[],o={name:"DashboardStaffs",data(){return{showStaffForm:!1,pagination:{page:1,rowsPerPage:0},departments:[],staffs:[],staffForm:{name:"",email:"",phone:"",department_id:"",password:"",password_confirmation:""},columns:[{name:"name",align:"center",label:"Name",field:t=>t.user.name,sortable:!0},{name:"phone",align:"center",label:"Phone",field:t=>t.user.phone},{name:"email",align:"center",label:"Email",field:t=>t.user.email}].concat("supportagents"===this.$route.params.type?[{name:"department",align:"center",label:"Department",field:t=>t.department.name,sortable:!0}]:[])}},mounted(){this.fetchDepartments(),this.fetchStaffs()},methods:{fetchDepartments(){this.$axios.get("departments").then((t=>{this.departments=t.data}))},fetchStaffs(){this.$axios.get(this.$route.params.type).then((t=>{this.staffs=t.data}))},createStaff(){this.$axios.post(this.$route.params.type,this.staffForm).then((t=>{201===t.status&&(this.showStaffForm=!1,this.fetchStaffs(),this.staffForm={},this.$q.notify({type:"positive",message:"Staff Created Successfully",position:"top-right"}))}))}}},r=o,i=a("2877"),f=a("9989"),l=a("eaac"),p=a("9c40"),m=a("24e8"),c=a("f09f"),u=a("0378"),d=a("a370"),h=a("1c1c"),b=a("0170"),w=a("66e5"),g=a("4074"),F=a("27f9"),q=a("ddd8"),S=a("4b7e"),y=a("7f67"),$=a("eebe"),v=a.n($),C=Object(i["a"])(r,s,n,!1,null,null,null);e["default"]=C.exports;v()(C,"components",{QPage:f["a"],QTable:l["a"],QBtn:p["a"],QDialog:m["a"],QCard:c["a"],QForm:u["a"],QCardSection:d["a"],QList:h["a"],QItemLabel:b["a"],QItem:w["a"],QItemSection:g["a"],QInput:F["a"],QSelect:q["a"],QCardActions:S["a"]}),v()(C,"directives",{ClosePopup:y["a"]})}}]);