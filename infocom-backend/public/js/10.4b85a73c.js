(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[10],{"0b22":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",{staticClass:"q-pa-md"},[a("div",{staticClass:"row "},[a("q-date",{staticClass:"col-3 q-ma-sm",attrs:{range:"",color:"secondary",subtitle:"Department Activity Log"},model:{value:e.departmentLogRange,callback:function(t){e.departmentLogRange=t},expression:"departmentLogRange"}},[[a("div",{staticClass:"flex flex-center items-center "},[e.isSupportAgent?e._e():a("q-select",{staticClass:"col q-pr-xs ",attrs:{dense:"",filled:"",options:e.departments,"option-label":"name","option-value":"id","emit-value":"","map-options":"",label:"Department"},model:{value:e.selectedDepartmentId,callback:function(t){e.selectedDepartmentId=e._n(t)},expression:"selectedDepartmentId"}}),a("download-excel",{staticClass:"col-2 q-mr-sm",attrs:{name:e.generateFileName("department_activity_log",e.departmentLogRange),header:e.generateFileName("department_activity_log",e.departmentLogRange),fetch:e.fetchDataDepartmentLog}},[a("q-btn",{attrs:{color:"secondary",icon:"text_snippet"}})],1)],1)]],2),a("q-date",{staticClass:"col-3 q-ma-sm",attrs:{range:"",color:"indigo",subtitle:"POP/Topic Report"},model:{value:e.topicStatusRange,callback:function(t){e.topicStatusRange=t},expression:"topicStatusRange"}},[[a("div",{staticClass:"flex flex-center items-center "},[e.isSupportAgent?e._e():a("q-select",{staticClass:"col q-pr-xs ",attrs:{dense:"",filled:"",options:e.departments,"option-label":"name","option-value":"id","emit-value":"","map-options":"",label:"Department"},model:{value:e.selectedDepartmentId,callback:function(t){e.selectedDepartmentId=e._n(t)},expression:"selectedDepartmentId"}}),a("download-excel",{staticClass:"col-2 q-mr-sm",attrs:{name:e.generateFileName("pop_topic_log",e.topicStatusRange),header:e.generateFileName("pop_topic_log",e.topicStatusRange),fetch:e.fetchDataTopicLog}},[a("q-btn",{attrs:{color:"indigo",icon:"text_snippet"}})],1)],1)]],2),a("q-date",{staticClass:"col-3 q-ma-sm",attrs:{range:"",color:"blue-grey",subtitle:"Service Time Report"},model:{value:e.serviceTimeRange,callback:function(t){e.serviceTimeRange=t},expression:"serviceTimeRange"}},[[a("div",{staticClass:"flex flex-center items-center "},[e.isSupportAgent?e._e():a("q-select",{staticClass:"col q-pr-xs ",attrs:{dense:"",filled:"",options:e.departments,"option-label":"name","option-value":"id","emit-value":"","map-options":"",label:"Department"},model:{value:e.selectedDepartmentId,callback:function(t){e.selectedDepartmentId=e._n(t)},expression:"selectedDepartmentId"}}),a("download-excel",{staticClass:"col-2 q-mr-sm",attrs:{name:e.generateFileName("service_time_log",e.serviceTimeRange),header:e.generateFileName("service_time_log",e.serviceTimeRange),fetch:e.fetchDataServiceLog}},[a("q-btn",{attrs:{color:"blue-grey",icon:"text_snippet"}})],1)],1)]],2),a("q-date",{staticClass:"col-3 q-ma-sm",attrs:{range:"",color:"purple-9",subtitle:"POP Report"},model:{value:e.popStatusRange,callback:function(t){e.popStatusRange=t},expression:"popStatusRange"}},[[a("div",{staticClass:"flex flex-center items-center "},[e.isSupportAgent?e._e():a("q-select",{staticClass:"col q-pr-xs ",attrs:{dense:"",filled:"",options:e.departments,"option-label":"name","option-value":"id","emit-value":"","map-options":"",label:"Department"},model:{value:e.selectedDepartmentId,callback:function(t){e.selectedDepartmentId=e._n(t)},expression:"selectedDepartmentId"}}),a("download-excel",{staticClass:"col-2 q-mr-sm",attrs:{name:e.generateFileName("pop_log",e.popStatusRange),header:e.generateFileName("pop_log",e.popStatusRange),fetch:e.fetchDataPopLog}},[a("q-btn",{attrs:{color:"purple-9",icon:"text_snippet"}})],1)],1)]],2)],1)])},n=[],o=(a("ddb0"),a("f2d9")),l={name:"DashboardReports",components:{downloadExcel:o["a"]},data(){return{isSupportAgent:!1,departments:[{id:"",name:"all depts"},...this.$store.getters.getDepartments],selectedDepartmentId:"",departmentLogRange:{to:"",from:""},complainStatusRange:{to:"",from:""},topicStatusRange:{to:"",from:""},serviceTimeRange:{to:"",from:""},popStatusRange:{to:"",from:""}}},mounted(){this.isSupportAgent=void 0!==this.$store.getters.getUser.support_agent,this.selectedDepartmentId=this.isSupportAgent?this.$store.getters.getUser.support_agent.department_id:""},methods:{generateFileName(e,t){return`${e}_${t.to.replaceAll("/","-")}_${t.from.replaceAll("/","-")}`},async fetchDataDepartmentLog(){const e=await this.$axios.get(`reports/departmentlog?department_id=${this.selectedDepartmentId}&start=${this.departmentLogRange.from.replaceAll("/","-")}&end=${this.departmentLogRange.to.replaceAll("/","-")}`);return e.data.rows},async fetchDataTopicLog(){const e=await this.$axios.get(`reports/topicwisepop?department_id=${this.selectedDepartmentId}&start=${this.topicStatusRange.from.replaceAll("/","-")}&end=${this.topicStatusRange.to.replaceAll("/","-")}`);return e.data.rows},async fetchDataServiceLog(){const e=await this.$axios.get(`reports/servicetime?department_id=${this.selectedDepartmentId}&start=${this.serviceTimeRange.from.replaceAll("/","-")}&end=${this.serviceTimeRange.to.replaceAll("/","-")}`);return e.data.rows},async fetchDataPopLog(){const e=await this.$axios.get(`reports/pop?department_id=${this.selectedDepartmentId}&start=${this.popStatusRange.from.replaceAll("/","-")}&end=${this.popStatusRange.to.replaceAll("/","-")}`);return e.data.rows}}},r=l,i=a("2877"),p=a("9989"),c=a("52ee"),d=a("ddd8"),m=a("9c40"),g=a("eebe"),u=a.n(g),f=Object(i["a"])(r,s,n,!1,null,null,null);t["default"]=f.exports;u()(f,"components",{QPage:p["a"],QDate:c["a"],QSelect:d["a"],QBtn:m["a"]})}}]);